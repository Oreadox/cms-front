(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a97c474"],{2593:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",{attrs:{"dis-hover":"",bordered:!1}},[a("div",{attrs:{id:"Profile"}},[a("Content",[a("div",[a("List",{staticClass:"List",staticStyle:{"margin-top":"5%","text-align":"center"},attrs:{header:"酒店资料",footer:"",border:""}},t._l(t.listItem.hotelData,(function(e,o){return a("ListItem",{key:o,staticClass:"ListItem",attrs:{value:e},model:{value:t.hotelData[e],callback:function(a){t.$set(t.hotelData,e,a)},expression:"hotelData[value]"}},[a("a",{on:{click:function(a){return t.gotoChange(e,o)}}},[a("div",{staticClass:"set_margin"},[t._v(t._s(e))]),a("div",[t._v(t._s(t.hotelData[o]))])])])})),1)],1)])],1)]),a("Modal",{attrs:{"footer-hide":"","mask-closable":!1},model:{value:t.changeInfoModal,callback:function(e){t.changeInfoModal=e},expression:"changeInfoModal"}},[a("ChangeInfo",{ref:"changeInfo",attrs:{hotelData:t.hotelData},on:{gotoProfile:t.gotoProfile}})],1),a("Modal",{attrs:{"footer-hide":"","mask-closable":!1},model:{value:t.changePasswordModal,callback:function(e){t.changePasswordModal=e},expression:"changePasswordModal"}},[a("ChangePassword",{attrs:{hotelData:t.hotelData},on:{gotoProfile:t.gotoProfile}})],1)],1)},r=[],s=(a("b0c0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Form",{ref:"formItem",staticStyle:{"margin-top":"5%"},attrs:{"hide-required-mark":"",rules:t.formValidate,model:t.formItem}},[a("h2",{staticStyle:{"text-align":"center"}},[t._v("修改个人信息")]),a("FormItem",{attrs:{label:"酒店名",prop:"name"}},[a("Input",{attrs:{type:"text"},model:{value:t.formItem.name,callback:function(e){t.$set(t.formItem,"name",e)},expression:"formItem.name"}})],1),a("FormItem",{attrs:{label:"联系电话",prop:"phone"}},[a("Input",{attrs:{type:"text"},model:{value:t.formItem.phone,callback:function(e){t.$set(t.formItem,"phone",e)},expression:"formItem.phone"}})],1),a("FormItem",{attrs:{label:"酒店地址",prop:"address"}},[a("Input",{attrs:{type:"text"},model:{value:t.formItem.address,callback:function(e){t.$set(t.formItem,"address",e)},expression:"formItem.address"}})],1),a("FormItem",{attrs:{label:"酒店简介",prop:"detail"}},[a("Input",{attrs:{type:"textarea"},model:{value:t.formItem.detail,callback:function(e){t.$set(t.formItem,"detail",e)},expression:"formItem.detail"}})],1),a("FormItem",[a("Button",{staticStyle:{float:"right","margin-left":"16px"},attrs:{type:"primary"},on:{click:function(e){return t.submitForm("formItem")}}},[t._v("修改 ")]),a("Button",{staticStyle:{float:"right"},attrs:{type:"text"},on:{click:function(){t.resetForm("formItem"),t.cancelButton()}}},[t._v("取消 ")])],1)],1)],1)}),n=[],i={name:"ChangeInfo",data:function(){return{formItem:{name:this.hotelData.name,phone:this.hotelData.phone,address:this.hotelData.address,detail:this.hotelData.detail},formValidate:{name:[{required:!0,message:"酒店名不能为空",trigger:"blur"}],phone:[{required:!0,message:"联系电话不能为空",trigger:"blur"},{pattern:/^[0-9]{11}$/,message:"联系电话不合法",trigger:"blur"}],address:[{required:!0,message:"酒店地址不能为空",trigger:"blur"}],detail:[{required:!0,message:"酒店简介不能为空",trigger:"blur"}]}}},props:["hotelData"],methods:{setForm:function(t){this.formItem.name=t.name,this.formItem.phone=t.phone,this.formItem.address=t.address,this.formItem.detail=t.detail},resetForm:function(t){this.$refs[t].resetFields()},cancelButton:function(){this.$emit("gotoProfile",!1)},submitForm:function(t){var e=this,a=this;this.$refs[t].validate((function(t){if(t){var o={name:e.formItem.name,address:e.formItem.address,detail:e.formItem.detail,telephone:e.formItem.phone};a.$axios({method:"post",url:"".concat(a.$baseURI,"/api/hotel/profile/modify"),data:o}).then((function(t){!0===t["data"]["success"]?(a.$Message.success("修改成功"),setTimeout((function(){a.$router.go(0)}),500)):a.$Message.error(t["data"]["message"])}))}}))}}},l=i,m=a("0c7c"),d=Object(m["a"])(l,s,n,!1,null,"71a6fc29",null),c=d.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Form",{ref:"formItem",staticStyle:{"margin-top":"5%"},attrs:{"hide-required-mark":"",rules:t.fromValidate,model:t.formItem}},[a("h2",{staticStyle:{"text-align":"center"}},[t._v("修改密码")]),a("FormItem",{attrs:{"show-message":"",label:"原密码",prop:"oldPassword"}},[a("Input",{attrs:{type:"password",password:"",placeholder:"输入原密码"},model:{value:t.formItem.oldPassword,callback:function(e){t.$set(t.formItem,"oldPassword",e)},expression:"formItem.oldPassword"}})],1),a("FormItem",{attrs:{label:"新密码",prop:"password"}},[a("Input",{attrs:{type:"password",password:"",placeholder:"长度为8-32, 需包含字母和数字"},model:{value:t.formItem.password,callback:function(e){t.$set(t.formItem,"password",e)},expression:"formItem.password"}})],1),a("FormItem",{attrs:{label:"确认密码",prop:"passwordCheck"}},[a("Input",{attrs:{type:"password",password:"",placeholder:"重复上述的密码"},model:{value:t.formItem.passwordCheck,callback:function(e){t.$set(t.formItem,"passwordCheck",e)},expression:"formItem.passwordCheck"}})],1),a("FormItem",[a("Button",{staticStyle:{float:"right","margin-left":"16px"},attrs:{type:"primary"},on:{click:function(e){return t.submitForm("formItem")}}},[t._v("修改 ")]),a("Button",{staticStyle:{float:"right"},attrs:{type:"text"},on:{click:function(){t.resetForm("formItem"),t.cancelButton()}}},[t._v("取消 ")])],1)],1)],1)},u=[],h={name:"ChangePassword",data:function(){var t=this,e=function(e,a,o){return a!==t.formItem.password?o(new Error("密码验证不一致")):o()};return{formItem:{oldPassword:"",password:"",passwordCheck:""},fromValidate:{oldPassword:[{required:!0,message:"原密码不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{type:"string",min:8,message:"密码至少需8位",trigger:"blur"},{type:"string",max:32,message:"密码最多32位",trigger:"blur"},{pattern:/(?=.*[0-9])(?=.*[a-zA-Z])/,message:"密码需包含字母和数字",trigger:"blur"}],passwordCheck:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{validator:e,trigger:"blur"}]}}},methods:{resetForm:function(t){this.$refs[t].resetFields()},cancelButton:function(){this.$emit("gotoProfile",!1)},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(t){var a={oldPassword:e.formItem.oldPassword,newPassword:e.formItem.password};e.$axios({method:"post",url:"".concat(e.$baseURI,"/api/hotel/password/modify"),data:a}).then((function(t){!0===t["data"]["success"]?(e.$Message.success("修改成功"),setTimeout((function(){e.$emit("gotoProfile",!1)}),200)):e.$Message.error(t["data"]["message"])}))}}))}}},p=h,g=Object(m["a"])(p,f,u,!1,null,"61138ee0",null),I=g.exports,w={name:"Profile",components:{ChangeInfo:c,ChangePassword:I},data:function(){return{hotelData:{account:"xxx",password:"●●●●●●●●●●",name:"xxx",phone:"xxx",address:"xxx",detail:"xxx"},listItem:{hotelData:{account:"酒店账号",password:"密码",name:"酒店名",phone:"联系电话",address:"酒店地址",detail:"酒店简介"}},changeInfoModal:!1,changePasswordModal:!1}},created:function(){this.getProfile()},methods:{gotoProfile:function(t){this.changeInfoModal=t,this.changePasswordModal=t},gotoChange:function(t,e){"account"!==e&&("password"===e?this.changePasswordModal=!0:(this.$refs.changeInfo.setForm(this.hotelData),this.changeInfoModal=!0))},getProfile:function(){var t=this;this.$axios({method:"post",url:"".concat(this.$baseURI,"/api/hotel/profile")}).then((function(e){var a=e["data"];t.hotelData.account=a["accountId"],t.hotelData.name=a["name"],t.hotelData.phone=a["telephone"],t.hotelData.address=a["address"],t.hotelData.detail=a["detail"]}))}}},b=w,v=(a("e751"),Object(m["a"])(b,o,r,!1,null,"3f2208fa",null));e["default"]=v.exports},"44ff":function(t,e,a){},b0c0:function(t,e,a){var o=a("83ab"),r=a("9bf2").f,s=Function.prototype,n=s.toString,i=/^\s*function ([^ (]*)/,l="name";o&&!(l in s)&&r(s,l,{configurable:!0,get:function(){try{return n.call(this).match(i)[1]}catch(t){return""}}})},e751:function(t,e,a){"use strict";a("44ff")}}]);
//# sourceMappingURL=chunk-1a97c474.8bafeed4.js.map