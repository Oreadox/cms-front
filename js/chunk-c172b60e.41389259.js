(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c172b60e"],{"25f0":function(e,t,r){"use strict";var a=r("6eeb"),o=r("825a"),s=r("d039"),n=r("ad6d"),i="toString",m=RegExp.prototype,l=m[i],d=s((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),c=l.name!=i;(d||c)&&a(RegExp.prototype,i,(function(){var e=o(this),t=String(e.source),r=e.flags,a=String(void 0===r&&e instanceof RegExp&&!("flags"in m)?n.call(e):r);return"/"+t+"/"+a}),{unsafe:!0})},"7c54":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Card",{attrs:{"dis-hover":"",bordered:!1}},[r("div",{attrs:{id:"Profile"}},[r("Content",[r("div",[r("List",{staticClass:"List",staticStyle:{"margin-top":"5%","text-align":"center"},attrs:{header:"个人资料",border:""}},[r("ListItem",{staticClass:"ListItem"},[r("a",[e._v(" 头像 ")])]),e._l(e.listItem.personalData,(function(t,a){return r("ListItem",{key:a,staticClass:"ListItem",attrs:{value:t},model:{value:e.userData[t],callback:function(r){e.$set(e.userData,t,r)},expression:"userData[value]"}},[r("a",{on:{click:function(r){return e.gotoChange(t,a)}}},[r("div",{staticClass:"set_margin"},[e._v(e._s(t))]),r("div",[e._v(e._s(e.userData[a]))])])])}))],2),r("br"),r("br"),r("List",{staticClass:"List",staticStyle:{"text-align":"center"},attrs:{header:"联系信息",border:""}},e._l(e.listItem.contactInformation,(function(t,a){return r("ListItem",{key:a,staticClass:"ListItem",attrs:{value:t}},[r("a",{on:{click:function(r){return e.gotoChange(t,a)}}},[r("div",{staticClass:"set_margin"},[e._v(e._s(t))]),r("div",[e._v(e._s(e.userData[a]))])])])})),1)],1)]),r("Modal",{attrs:{"footer-hide":"","mask-closable":!1},model:{value:e.modelInfo.changeModal,callback:function(t){e.$set(e.modelInfo,"changeModal",t)},expression:"modelInfo.changeModal"}},[r("ChangeInfo",{ref:"setDefault",attrs:{userData:e.userData},on:{gotoProfile:e.gotoProfile}})],1),r("Modal",{attrs:{"footer-hide":"","mask-closable":!1},model:{value:e.passwordModel.changeModal,callback:function(t){e.$set(e.passwordModel,"changeModal",t)},expression:"passwordModel.changeModal"}},[r("ChangePassword",{attrs:{userData:e.userData},on:{gotoProfile:e.gotoProfile}})],1)],1)])},o=[],s=(r("b0c0"),r("d3b7"),r("25f0"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Form",{ref:"formItem",staticStyle:{"margin-top":"5%"},attrs:{"hide-required-mark":"",rules:e.formValidate,model:e.formItem}},[r("h2",{staticStyle:{"text-align":"center"}},[e._v("修改个人信息")]),r("FormItem",{attrs:{label:"名称",prop:"name"}},[r("Input",{attrs:{type:"text"},model:{value:e.formItem.name,callback:function(t){e.$set(e.formItem,"name",t)},expression:"formItem.name"}})],1),r("FormItem",{attrs:{label:"性别",prop:"gender"}},[r("RadioGroup",{model:{value:e.formItem.gender,callback:function(t){e.$set(e.formItem,"gender",t)},expression:"formItem.gender"}},[r("Radio",{attrs:{label:"MALE"}},[e._v("男")]),r("Radio",{attrs:{label:"FEMALE"}},[e._v("女")])],1)],1),r("FormItem",{attrs:{label:"生日",prop:"birthday"}},[r("DatePicker",{attrs:{options:e.ControlTime,type:"date"},model:{value:e.formItem.birthday,callback:function(t){e.$set(e.formItem,"birthday",t)},expression:"formItem.birthday"}})],1),r("FormItem",{attrs:{label:"邮箱",prop:"email"}},[r("Input",{attrs:{type:"email"},model:{value:e.formItem.email,callback:function(t){e.$set(e.formItem,"email",t)},expression:"formItem.email"}})],1),r("FormItem",{attrs:{label:"电话",prop:"phone"}},[r("Input",{attrs:{type:"text"},model:{value:e.formItem.phone,callback:function(t){e.$set(e.formItem,"phone",t)},expression:"formItem.phone"}})],1),r("FormItem",{attrs:{label:"工作单位",prop:"workUnit"}},[r("Input",{attrs:{type:"text"},model:{value:e.formItem.workUnit,callback:function(t){e.$set(e.formItem,"workUnit",t)},expression:"formItem.workUnit"}})],1),r("FormItem",[r("Button",{staticStyle:{float:"right","margin-left":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.submitForm("formItem")}}},[e._v("修改 ")]),r("Button",{staticStyle:{float:"right"},attrs:{type:"text"},on:{click:function(){e.resetForm("formItem"),e.cancelButton()}}},[e._v("取消 ")])],1)],1)],1)}),n=[],i={name:"ChangeInfo",data:function(){return{formItem:{name:"",gender:"",birthday:"",email:"",phone:"",idCard:"",workUnit:""},ControlTime:{disabledDate:function(e){return e&&e.getTime()>Date.now()}},formValidate:{name:[{required:!0,message:"姓名不能为空",trigger:"blur"}],gender:[{required:!0,message:"性别不能为空",trigger:"blur"}],birthday:[{type:"date",required:!0,message:"生日不能为空",trigger:"change"}],email:[{required:!0,message:"邮箱不能为空",trigger:"blur"},{type:"email",message:"邮箱不合法",trigger:"blur"}],phone:[{required:!0,message:"手机号码不能为空",trigger:"blur"},{pattern:/^[1][0-9]{10}$/,message:"手机号不合法",trigger:"blur"}]}}},props:["userData"],methods:{setDataDefault:function(){switch(this.formItem.name=this.userData.name,this.formItem.gender=this.userData.gender,this.formItem.birthday=this.userData.birthday,this.formItem.email=this.userData.email,this.formItem.phone=this.userData.phone,this.formItem.idCard=this.userData.idCard,this.formItem.workUnit=this.userData.workUnit,this.userData.gender){case"男":this.formItem.gender="MALE";break;case"女":this.formItem.gender="FEMALE";break}},resetForm:function(e){this.$refs[e].resetFields()},cancelButton:function(){this.$emit("gotoProfile",!1)},submitForm:function(e){var t=this,r=this;this.$refs[e].validate((function(e){if(e){var a={name:t.formItem.name,gender:t.formItem.gender,birthday:t.formItem.birthday.getTime(),residentIdNumber:t.formItem.idCard,email:t.formItem.email,telephone:t.formItem.phone,workplace:t.formItem.workUnit};r.$axios({method:"post",url:"".concat(t.$baseURI,"/api/user/profile/modify"),data:a}).then((function(e){!0===e["data"]["success"]?(r.$Message.success("修改成功"),r.$emit("gotoProfile",!1)):r.$Message.error(e["data"]["message"])}))}}))}}},m=i,l=r("0c7c"),d=Object(l["a"])(m,s,n,!1,null,"13774787",null),c=d.exports,u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Form",{ref:"formItem",staticStyle:{"margin-top":"5%"},attrs:{"hide-required-mark":"",rules:e.fromValidate,model:e.formItem}},[r("h2",{staticStyle:{"text-align":"center"}},[e._v("修改密码")]),r("FormItem",{attrs:{"show-message":"",label:"原密码",prop:"oldPassword"}},[r("Input",{attrs:{type:"password",placeholder:"输入原密码"},model:{value:e.formItem.oldPassword,callback:function(t){e.$set(e.formItem,"oldPassword",t)},expression:"formItem.oldPassword"}})],1),r("FormItem",{attrs:{label:"新密码",prop:"password"}},[r("Input",{attrs:{type:"password",password:"",placeholder:"长度为8-32, 需包含字母和数字"},model:{value:e.formItem.password,callback:function(t){e.$set(e.formItem,"password",t)},expression:"formItem.password"}})],1),r("FormItem",{attrs:{label:"确认密码",prop:"passwordCheck"}},[r("Input",{attrs:{type:"password",password:"",placeholder:"重复上述的密码"},model:{value:e.formItem.passwordCheck,callback:function(t){e.$set(e.formItem,"passwordCheck",t)},expression:"formItem.passwordCheck"}})],1),r("FormItem",[r("Button",{staticStyle:{float:"right","margin-left":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.submitForm("formItem")}}},[e._v("修改 ")]),r("Button",{staticStyle:{float:"right"},attrs:{type:"text"},on:{click:function(){e.resetForm("formItem"),e.cancelButton()}}},[e._v("取消 ")])],1)],1)],1)},f=[],g={name:"ChangePassword",data:function(){var e=this,t=function(t,r,a){return r!==e.formItem.password?a(new Error("密码验证不一致")):a()};return{formItem:{oldPassword:"",password:"",passwordCheck:""},fromValidate:{oldPassword:[{required:!0,message:"原密码不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{type:"string",min:8,message:"密码至少需8位",trigger:"blur"},{type:"string",max:32,message:"密码最多32位",trigger:"blur"},{pattern:/(?=.*[0-9])(?=.*[a-zA-Z])/,message:"密码需包含字母和数字",trigger:"blur"}],passwordCheck:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{validator:t,trigger:"blur"}]}}},methods:{resetForm:function(e){this.$refs[e].resetFields()},cancelButton:function(){this.$emit("gotoProfile",!1)},submitForm:function(e){var t=this;t.$refs[e].validate((function(e){if(e){var r={oldPassword:t.formItem.oldPassword,newPassword:t.formItem.password};t.$axios({method:"post",url:"".concat(t.$baseURI,"/api/user/password/modify"),data:r}).then((function(e){!0===e["data"]["success"]?(t.$Message.success("修改成功"),t.$emit("gotoProfile",!1)):!1===e["data"]["oldPasswordCorrect"]?t.$Message.error("原密码错误"):t.$Message.error(e["data"]["message"])}))}}))}}},p=g,h=Object(l["a"])(p,u,f,!1,null,"415ca768",null),I=h.exports,b={name:"Profile",components:{ChangePassword:I,ChangeInfo:c},data:function(){return{userData:{name:"",birthday:"",gender:"",password:"●●●●●●●●●●●●●●",account:"",email:"",phone:"",idCard:"",workUnit:""},listItem:{personalData:{name:"名称",birthday:"生日",gender:"性别",password:"密码",workUnit:"工作单位"},contactInformation:{account:"账号",email:"邮箱",phone:"电话"}},modelInfo:{changeModal:!1},passwordModel:{changeModal:!1}}},created:function(){this.getProfile()},methods:{gotoProfile:function(e){this.modelInfo.changeModal=e,this.passwordModel.changeModal=e,this.getProfile()},gotoChange:function(e,t){this.$refs.setDefault.setDataDefault(),"account"!==t&&("password"!==t?this.modelInfo.changeModal=!0:this.passwordModel.changeModal=!0)},getProfile:function(){var e=this;this.$axios({method:"post",url:"".concat(this.$baseURI,"/api/user/profile")}).then((function(t){var r=t["data"];e.userData.name=r["name"],e.userData.birthday=function(){var e=new Date(r["birthday"]),t=e.getFullYear().toString()+"-"+(e.getMonth()+1).toString()+"-"+e.getDate().toString();return t}(),e.userData.gender="MALE"===r["gender"]?"男":"女",e.userData.account=r["accountId"],e.userData.email=r["email"],e.userData.phone=r["telephone"],e.userData.idCard=r["residentIdNumber"],e.userData.workUnit=r["workplace"]}))}}},w=b,v=(r("ea6f"),Object(l["a"])(w,a,o,!1,null,"6a4608f5",null));t["default"]=v.exports},"7ebe":function(e,t,r){},ad6d:function(e,t,r){"use strict";var a=r("825a");e.exports=function(){var e=a(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},b0c0:function(e,t,r){var a=r("83ab"),o=r("9bf2").f,s=Function.prototype,n=s.toString,i=/^\s*function ([^ (]*)/,m="name";a&&!(m in s)&&o(s,m,{configurable:!0,get:function(){try{return n.call(this).match(i)[1]}catch(e){return""}}})},ea6f:function(e,t,r){"use strict";r("7ebe")}}]);
//# sourceMappingURL=chunk-c172b60e.41389259.js.map