(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-902b08cc"],{"7c54":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",{style:{padding:"24px",margin:"auto auto auto 15vw"},attrs:{"dis-hover":"",bordered:!1}},[a("div",{attrs:{id:"Profile"}},[a("Content",[a("div",[a("List",{staticClass:"List",staticStyle:{"margin-top":"5%","text-align":"center"},attrs:{header:"个人资料",border:""}},[a("ListItem",{staticClass:"ListItem"},[a("a",[t._v(" 头像 ")]),t._v("v ")]),t._l(t.listItem.personalData,(function(e,r){return a("ListItem",{key:r,staticClass:"ListItem",attrs:{value:e},model:{value:t.userData[e],callback:function(a){t.$set(t.userData,e,a)},expression:"userData[value]"}},[a("a",{on:{click:function(a){return t.gotoChange(e,r)}}},[a("div",{staticClass:"set_margin"},[t._v(t._s(e))]),a("div",[t._v(t._s(t.userData[r]))])])])}))],2),a("br"),a("br"),a("List",{staticClass:"List",staticStyle:{"text-align":"center"},attrs:{header:"联系信息",border:""}},t._l(t.listItem.contactInformation,(function(e,r){return a("ListItem",{key:r,staticClass:"ListItem",attrs:{value:e}},[a("a",{on:{click:function(a){return t.gotoChange(e,r)}}},[a("div",{staticClass:"set_margin"},[t._v(t._s(e))]),a("div",[t._v(t._s(t.userData[r]))])])])})),1)],1)]),a("Modal",{attrs:{"footer-hide":"","mask-closable":!1},model:{value:t.modelInfo.changeModal,callback:function(e){t.$set(t.modelInfo,"changeModal",e)},expression:"modelInfo.changeModal"}},[a("ChangeInfo",{attrs:{userData:t.userData},on:{gotoProfile:t.gotoProfile}})],1),a("Modal",{attrs:{"footer-hide":"","mask-closable":!1},model:{value:t.passwordModel.changeModal,callback:function(e){t.$set(t.passwordModel,"changeModal",e)},expression:"passwordModel.changeModal"}},[a("ChangePassword",{attrs:{userData:t.userData},on:{gotoProfile:t.gotoProfile}})],1)],1)])},o=[],s=(a("b0c0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Form",{ref:"formItem",staticStyle:{"margin-top":"5%"},attrs:{"hide-required-mark":"",rules:t.formValidate,model:t.formItem}},[a("h2",{staticStyle:{"text-align":"center"}},[t._v("修改个人信息")]),a("FormItem",{attrs:{label:"名称",prop:"name"}},[a("Input",{attrs:{type:"text"},model:{value:t.formItem.name,callback:function(e){t.$set(t.formItem,"name",e)},expression:"formItem.name"}})],1),a("FormItem",{attrs:{label:"性别",prop:"gender"}},[a("RadioGroup",{model:{value:t.formItem.gender,callback:function(e){t.$set(t.formItem,"gender",e)},expression:"formItem.gender"}},[a("Radio",{attrs:{label:"MALE"}},[t._v("男")]),a("Radio",{attrs:{label:"FEMALE"}},[t._v("女")])],1)],1),a("FormItem",{attrs:{label:"生日",prop:"birthday"}},[a("DatePicker",{attrs:{type:"date"},model:{value:t.formItem.birthday,callback:function(e){t.$set(t.formItem,"birthday",e)},expression:"formItem.birthday"}})],1),a("FormItem",{attrs:{label:"邮箱",prop:"email"}},[a("Input",{attrs:{type:"email"},model:{value:t.formItem.email,callback:function(e){t.$set(t.formItem,"email",e)},expression:"formItem.email"}})],1),a("FormItem",{attrs:{label:"电话",prop:"phone"}},[a("Input",{attrs:{type:"text"},model:{value:t.formItem.phone,callback:function(e){t.$set(t.formItem,"phone",e)},expression:"formItem.phone"}})],1),a("FormItem",[a("Button",{staticStyle:{float:"right","margin-left":"16px"},attrs:{type:"primary"},on:{click:function(e){return t.submitForm()}}},[t._v("修改 ")]),a("Button",{staticStyle:{float:"right"},attrs:{type:"text"},on:{click:function(){t.resetForm("formItem"),t.cancelButton()}}},[t._v("取消")])],1)],1)],1)}),n=[],i={name:"ChangeInfo",data:function(){var t=this,e=function(e,a,r){t.$axios({method:"post",url:t.$baseURI+"/api/register/checkUsername",data:{username:a}}).then((function(t){!1===t["data"]["result"]?r(new Error("用户名重复")):r()}))};return{formItem:{name:this.userData.name,gender:this.userData.gender,birthday:this.userData.birthday,email:this.userData.email,phone:this.userData.phone,idCard:this.userData.idCard,workUnit:this.userData.workUnit},formValidate:{username:[{required:!0,message:"新用户名不能为空",trigger:"blur"},{validator:e,trigger:"blur"}],name:[{required:!0,message:"姓名不能为空",trigger:"blur"}],gender:[{required:!0,message:"性别不能为空",trigger:"blur"}],birthday:[{type:"date",required:!0,message:"生日不能为空",trigger:"change"}],phone:[{required:!0,message:"手机号码不能为空",trigger:"blur"},{pattern:/^[1][0-9]{10}$/,message:"手机号不合法",trigger:"blur"}]}}},props:["userData"],methods:{resetForm:function(t){this.$refs[t].resetFields()},cancelButton:function(){this.$emit("gotoProfile",!1)},submitForm:function(){var t=this;this.$axios({method:"post",url:"".concat(this.$baseURI,"/api/user/profile/modify"),data:this.formItem}).then((function(e){!0===e["data"]["success"]?t.$Message.success("修改成功"):t.$Message.error(e["data"]["message"])}))}}},l=i,m=a("0c7c"),c=Object(m["a"])(l,s,n,!1,null,"19038dfa",null),u=c.exports,d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Form",{ref:"formItem",staticStyle:{"margin-top":"5%"},attrs:{"hide-required-mark":"",rules:t.fromValidate,model:t.formItem}},[a("h2",{staticStyle:{"text-align":"center"}},[t._v("修改密码")]),a("FormItem",{attrs:{"show-message":"",label:"原密码"}},[a("Input",{attrs:{placeholder:"输入原密码"}})],1),a("FormItem",{attrs:{label:"新密码",prop:"password"}},[a("Input",{attrs:{type:"password",password:"",placeholder:"长度为8-32, 需包含字母和数字"},model:{value:t.formItem.password,callback:function(e){t.$set(t.formItem,"password",e)},expression:"formItem.password"}})],1),a("FormItem",{attrs:{label:"确认密码",prop:"passwordCheck"}},[a("Input",{attrs:{type:"password",password:"",placeholder:"重复上述的密码"},model:{value:t.formItem.passwordCheck,callback:function(e){t.$set(t.formItem,"passwordCheck",e)},expression:"formItem.passwordCheck"}})],1),a("FormItem",[a("Button",{staticStyle:{float:"right","margin-left":"16px"},attrs:{type:"primary"},on:{click:function(e){return t.submitForm()}}},[t._v("修改 ")]),a("Button",{staticStyle:{float:"right"},attrs:{type:"text"},on:{click:function(){t.resetForm("formItem"),t.cancelButton()}}},[t._v("取消")])],1)],1)],1)},f=[],p={name:"ChangePassword",props:["userData"],data:function(){var t=this,e=function(e,a,r){return a!==t.formItem.password?r(new Error("密码验证不一致")):r()};return{formItem:{password:"",passwordCheck:""},fromValidate:{password:[{required:!0,message:"密码不能为空",trigger:"blur"},{type:"string",min:8,message:"密码至少需8位",trigger:"blur"},{type:"string",max:32,message:"密码最多32位",trigger:"blur"},{pattern:/(?=.*[0-9])(?=.*[a-zA-Z])/,message:"密码需包含字母和数字",trigger:"blur"}],passwordCheck:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{validator:e,trigger:"blur"}]}}},methods:{resetForm:function(t){this.$refs[t].resetFields()},cancelButton:function(){this.$emit("gotoProfile",!1)},submitForm:function(){console.log("sd")}}},g=p,h=Object(m["a"])(g,d,f,!1,null,"5ad0b81b",null),I=h.exports,b={name:"Profile",components:{ChangePassword:I,ChangeInfo:u},data:function(){return{userData:{name:"xxx",birthday:"2000-01-01",gender:"xxx",password:"●●●●●●●●●●●●",account:"xxx",email:"xxx",phone:"xxx",idCard:"",workUnit:"xxx"},listItem:{personalData:{name:"名称",birthday:"生日",gender:"性别",password:"密码",workUnit:"工作单位"},contactInformation:{account:"账号",email:"邮箱",phone:"电话"}},modelInfo:{changeModal:!1},passwordModel:{changeModal:!1}}},created:function(){this.getProfile()},methods:{gotoProfile:function(t){this.modelInfo.changeModal=t,this.passwordModel.changeModal=t},gotoChange:function(t,e){"account"!==e&&(console.log("password"!==e),"password"!==e?this.modelInfo.changeModal=!0:this.passwordModel.changeModal=!0)},getProfile:function(){var t=this;this.$axios({method:"post",url:"".concat(this.$baseURI,"/api/user/profile")}).then((function(e){var a=e["data"];t.userData.name=a["name"],t.userData.birthday=new Date(a["birthday"]),t.userData.gender=a["gender"],t.userData.account=a["accountId"],t.userData.email=a["email"],t.userData.phone=a["telephone"],t.userData.idCard=a["residentIdNumber"],t.userData.workUnit=a["workplace"]}))}}},v=b,w=(a("c736"),Object(m["a"])(v,r,o,!1,null,"25f9e191",null));e["default"]=w.exports},"9c92":function(t,e,a){},b0c0:function(t,e,a){var r=a("83ab"),o=a("9bf2").f,s=Function.prototype,n=s.toString,i=/^\s*function ([^ (]*)/,l="name";r&&!(l in s)&&o(s,l,{configurable:!0,get:function(){try{return n.call(this).match(i)[1]}catch(t){return""}}})},c736:function(t,e,a){"use strict";a("9c92")}}]);
//# sourceMappingURL=chunk-902b08cc.e656365a.js.map